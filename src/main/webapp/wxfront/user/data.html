<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <title>客户数据中心-数据统计</title>
  <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="../css/bootstrap.min.css"/>
  <link rel="stylesheet" href="../css/index.css"/>
  <link rel="stylesheet" href="../css/main.css">
  <link rel="stylesheet" href="../css/LArea.css">
  <script src="../../static/js/jquery.min.js" type="text/javascript"></script>
  <script src="../js/CONSTANT.js" type="text/javascript"></script>
  <script src="../js/common.utils.js" type="text/javascript"></script>
  <script src="../js/echarts.simple.min.js"></script>
<style>
@media (max-width: 767px) {
.table-responsive {
width: 100%;
margin-bottom: 15px;
overflow-x: scroll;
overflow-y: hidden;
/*border: 1px solid #dddddd;*/
-ms-overflow-style: -ms-autohiding-scrollbar;
-webkit-overflow-scrolling: touch;
}
.table-responsive td {border-bottom: 1px solid #dddddd;line-height:2rem;text-align:center;}
.table-responsive thead { font-weight:bold;}
.table-responsive thead td {border-bottom: 2px solid #dddddd;line-height:2.5rem;border-top: 1px solid #dddddd;}
.table-responsive tbody td {color:#666;}
.table-responsive > .table {
margin-bottom: 0;
}
.table-responsive > .table > thead > tr > th,
.table-responsive > .table > tbody > tr > th,
.table-responsive > .table > tfoot > tr > th,
.table-responsive > .table > thead > tr > td,
.table-responsive > .table > tbody > tr > td,
.table-responsive > .table > tfoot > tr > td {
white-space: nowrap;
}
}
ul,li{ list-style: none;font-size:1rem;}
li img {width:1rem;height:1rem;margin-top:.8rem;margin-right:.3rem}
.tabClick{ background: #19a6ee; overflow: hidden;color:#fff; }
.tabClick li{ height:44px; line-height: 44px; width: 33.3%; float: left; text-align: center}
.tabClick li.active{ color: #fff; transition: 0.1s; font-weight: bold}
.tabCon{ overflow: hidden}
.tabBox{ position: relative}
.tabList{word-break: break-all; width:100%;float:left;text-align:center;}
.lineBorder{ height: 2px; overflow: hidden; border-bottom:1px solid #006598; background: #19a6ee}
.lineDiv{ background: #006598; height: 2px; width: 33.3%;}
</style>
<script type="text/javascript">
function xlh(){
  var tbl = document.getElementById("tbl");
  var rows = tbl.rows.length;
  for(var i=0;i<rows;i++){
    if(i%2 == 0) tbl.rows[i].style.backgroundColor= "#f9f9f9";
	else tbl.rows[i].style.backgroundColor = "#fff";
  }
}
</script>
</head>

<body>
<div class="wrap" id="wrap">
    <ul class="tabClick">
        <li class="active"><img src="../images/pic_13.png">日数据统计</li>
        <li><img src="../images/pic_14.png">周数据统计</li>
        <li><img src="../images/pic_15.png">月数据统计</li>
    </ul>
<div class="lineBorder">
        <div class="lineDiv"><!--移动的div--></div>
    </div>
    <div class="tabCon">
        <div class="tabBox">
            <div class="tabList">
  <div class="item_sflr row" style="width:100%; border:1px solid #FFFFFF;margin:0;padding:0;" >
    <div class="inputdate02">
      <button id="preDate" onclick="preDay()">前一天</button>
      <input type="date" placeholder="" id="nowDate" value="请输入日期" style="width:60%;" readonly >
      <button id="nextDate" onclick="nextDay()">后一天</button>
    </div>
  </div>
<div style="line-height:4rem;text-align:center;font-size:1.3rem">天成团队8月客户来访日数据统计</div>
<table border="0" cellspacing="0" cellpadding="0" class="table-responsive">
  <thead><tr>
    <td>顾问</td>
    <td>日访</td>
    <td>首访</td>
    <td>复访</td>
    <td>成交</td>
  </tr>
  </thead>
  <tbody id="tbl">
  <tr>
    <td>池如霞</td>
    <td>4</td>
    <td>4</td>
    <td>5</td>
    <td>6</td>
  </tr>
  <tr>
    <td>池如霞</td>
    <td>4</td>
    <td>4</td>
    <td>5</td>
    <td>6</td>
  </tr>
  <tr>
    <td>池如霞</td>
    <td>4</td>
    <td>4</td>
    <td>5</td>
    <td>6</td>
  </tr>
  <tr>
    <td>池如霞</td>
    <td>4</td>
    <td>4</td>
    <td>5</td>
    <td>6</td>
  </tr>
  </tbody>
</table>
<div id="dayEcharts" style="width: 100%;height:400px;"></div>
</div>
<div class="tabList">
  <div class="item_sflr row" style="width:100%; border:1px solid #FFFFFF;margin:0;padding:0;">
    <div class="inputdate02">
      <button id="preWeek" onclick="preWeek()">前一周</button>
      <input type="date" placeholder="Birth day" id="nowWeek" value="请输入日期" style="width:60%;" readonly >
      <button id="nextWeek" onclick="nextWeek()">后一周</button>
    </div>
  </div>

<div style="line-height:4rem;text-align:center;font-size:1.3rem">天成团队8月客户来访周数据统计</div>
<table border="0" cellspacing="0" cellpadding="0" class="table-responsive">
  <thead><tr>
    <td>顾问</td>
    <td>日均</td>
    <td>周访</td>
    <td>首访</td>
    <td>复访</td>
    <td>成交</td>
  </tr>
  </thead>
  <tbody id="tbl">
  <tr>
    <td>池如霞</td>
    <td>4</td>
    <td>4</td>
    <td>5</td>
    <td>6</td>
    <td>6</td>
  </tr>
  <tr>
    <td>池如霞</td>
    <td>4</td>
    <td>4</td>
    <td>5</td>
    <td>6</td>
    <td>6</td>
  </tr>
  <tr>
    <td>池如霞</td>
    <td>4</td>
    <td>4</td>
    <td>5</td>
    <td>6</td>
    <td>6</td>
  </tr>
  <tr>
    <td>池如霞</td>
    <td>4</td>
    <td>4</td>
    <td>5</td>
    <td>6</td>
    <td>6</td>
  </tr>
  <tr>
    <td>池如霞</td>
    <td>4</td>
    <td>4</td>
    <td>5</td>
    <td>6</td>
    <td>6</td>
  </tr>
  </tbody>
</table>
<div id="weekEcharts" style="width: 100%;height:400px;"></div>
</div>
<div class="tabList">
 <div class="item_sflr row" style="width:100%; border:1px solid #FFFFFF;margin:0;padding:0;">
    <div class="inputdate02">
      <button id="preMonth" onclick="preMonth()">前一月</button>
      <input type="date" placeholder="Birth day" id="nowMonth" value="2017-09" style="width:60%;" readonly >
      <button id="nextMonth" onclick="nextMonth()">后一月</button>
    </div>
  </div>
<div style="line-height:4rem;text-align:center;font-size:1.3rem">天成团队8月客户来访月数据统计</div>
<table border="0" cellspacing="0" cellpadding="0" class="table-responsive">
  <thead><tr>
    <td>顾问</td>
    <td>日均</td>
    <td>月访</td>
    <td>首访</td>
    <td>复访</td>
    <td>成交</td>
  </tr>
  </thead>
  <tbody id="tbl">
  <tr>
    <td>池如霞</td>
    <td>4</td>
    <td>4</td>
    <td>5</td>
    <td>6</td>
    <td>6</td>
  </tr>
  <tr>
    <td>池如霞</td>
    <td>4</td>
    <td>4</td>
    <td>5</td>
    <td>6</td>
    <td>6</td>
  </tr>
  <tr>
    <td>池如霞</td>
    <td>4</td>
    <td>4</td>
    <td>5</td>
    <td>6</td>
    <td>6</td>
  </tr>
  <tr>
    <td>池如霞</td>
    <td>4</td>
    <td>4</td>
    <td>5</td>
    <td>6</td>
    <td>6</td>
  </tr>
  <tr>
    <td>池如霞</td>
    <td>4</td>
    <td>4</td>
    <td>5</td>
    <td>6</td>
    <td>6</td>
  </tr>
  </tbody>
</table>
<div id="monthEcharts" style="width: 100%;height:400px;"></div>
</div>
        </div>
    </div>
</div>
<script charset="utf-8">
	window.onload = function (){
	xlh();
        var windowWidth = document.body.clientWidth; //window 宽度;
		var wrap = document.getElementById('wrap');
        var tabClick = wrap.querySelectorAll('.tabClick')[0];
        var tabLi = tabClick.getElementsByTagName('li');
        
        var tabBox =  wrap.querySelectorAll('.tabBox')[0];
        var tabList = tabBox.querySelectorAll('.tabList');
        
        var lineBorder = wrap.querySelectorAll('.lineBorder')[0];
        var lineDiv = lineBorder.querySelectorAll('.lineDiv')[0];
        
        var tar = 0;
        var endX = 0;
        var dist = 0;
        
        tabBox.style.overflow='hidden';
        tabBox.style.position='relative';
        tabBox.style.width=windowWidth*tabList.length+"px";
        
        for(var i = 0 ;i<tabLi.length; i++ ){
              tabList[i].style.width=windowWidth+"px";
              tabList[i].style.float='left';
              tabList[i].style.float='left';
              tabList[i].style.padding='0';
              tabList[i].style.margin='0';
              tabList[i].style.verticalAlign='top';
              tabList[i].style.display='table-cell';
        }
        
        for(var i = 0 ;i<tabLi.length; i++ ){
            tabLi[i].start = i;
            tabLi[i].onclick = function(){
                var star = this.start;
                for(var i = 0 ;i<tabLi.length; i++ ){
                    tabLi[i].className='';
                };
                tabLi[star].className='active';
                init.lineAnme(lineDiv,windowWidth/tabLi.length*star)
                init.translate(tabBox,windowWidth,star);
                endX= -star*windowWidth;
            }
        }
        
        function OnTab(star){
            if(star<0){
                star=0;
            }else if(star>=tabLi.length){
                star=tabLi.length-1
            }
            for(var i = 0 ;i<tabLi.length; i++ ){
                tabLi[i].className='';
            };
            
             tabLi[star].className='active';
            init.translate(tabBox,windowWidth,star);
            endX= -star*windowWidth;
        };
        
        tabBox.addEventListener('touchstart',chstart,false);
        tabBox.addEventListener('touchmove',chmove,false);
        tabBox.addEventListener('touchend',chend,false);
        //按下
        function chstart(ev){
            ev.preventDefault;
            var touch = ev.touches[0];
            tar=touch.pageX;
            tabBox.style.webkitTransition='all 0s ease-in-out';
            tabBox.style.transition='all 0s ease-in-out';
        };
        //滑动
        function chmove(ev){
            var stars = wrap.querySelector('.active').start;
            ev.preventDefault;
            var touch = ev.touches[0];
            var distance = touch.pageX-tar;
            dist = distance;
            init.touchs(tabBox,windowWidth,tar,distance,endX);
            init.lineAnme(lineDiv,-dist/tabLi.length-endX/4);
        };
        //离开
        function chend(ev){
            var str= tabBox.style.transform;
            var strs = JSON.stringify(str.split(",",1));  
            endX = Number(strs.substr(14,strs.length-18)); 
            
            if(endX>0){
                init.back(tabBox,windowWidth,tar,0,0,0.3);
                endX=0
            }else if(endX<-windowWidth*tabList.length+windowWidth){
                endX=-windowWidth*tabList.length+windowWidth
                init.back(tabBox,windowWidth,tar,0,endX,0.3);
            }else if(dist<-windowWidth/3){
                 OnTab(tabClick.querySelector('.active').start+1);
                 init.back(tabBox,windowWidth,tar,0,endX,0.3);
            }else if(dist>windowWidth/3){
                 OnTab(tabClick.querySelector('.active').start-1);
            }else{
                 OnTab(tabClick.querySelector('.active').start);
            }
            var stars = wrap.querySelector('.active').start;
            init.lineAnme(lineDiv,stars*windowWidth/4);
            
        };
	};
	
    var init={
        translate:function(obj,windowWidth,star){
            obj.style.webkitTransform='translate3d('+-star*windowWidth+'px,0,0)';
            obj.style.transform='translate3d('+-star*windowWidth+',0,0)px';
            obj.style.webkitTransition='all 0.3s ease-in-out';
            obj.style.transition='all 0.3s ease-in-out';
        },
        touchs:function(obj,windowWidth,tar,distance,endX){
            obj.style.webkitTransform='translate3d('+(distance+endX)+'px,0,0)';
            obj.style.transform='translate3d('+(distance+endX)+',0,0)px';
        },
        lineAnme:function(obj,stance){
            obj.style.webkitTransform='translate3d('+stance+'px,0,0)';
            obj.style.transform='translate3d('+stance+'px,0,0)';
            obj.style.webkitTransition='all 0.1s ease-in-out';
            obj.style.transition='all 0.1s ease-in-out';
        },
        back:function(obj,windowWidth,tar,distance,endX,time){
            obj.style.webkitTransform='translate3d('+(distance+endX)+'px,0,0)';
            obj.style.transform='translate3d('+(distance+endX)+',0,0)px';
            obj.style.webkitTransition='all '+time+'s ease-in-out';
            obj.style.transition='all '+time+'s ease-in-out';
        }
    }

    //实现天，周，月的增减
	var preclickDay="";
	var preclickWeek="";
	var preclickMonth="";
	Date.prototype.Format = function(fmt) {
		var o = {
			"M+": this.getMonth() + 1, //月份   
			"d+": this.getDate(), //日   
			"h+": this.getHours(), //小时   
			"m+": this.getMinutes(), //分   
			"s+": this.getSeconds(), //秒   
			"q+": Math.floor((this.getMonth() + 3) / 3), //季度   
			"S": this.getMilliseconds() //毫秒   
		};
		if(/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
		for(var k in o)
			if(new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
		return fmt;
	}
	var date = new Date().Format("yyyy-MM-dd"); //Format("输入你想要的时间格式:yyyy-MM-dd,yyyyMMdd")  
	var textVal = $("#nowDate").val(date);
	var textVal = $("#nowWeek").val(date);
	var textVal = $("#nowMonth").val(date);
	//点击按钮实现前一天后一天
	function preDay(){
		preclickDay++ 
		updateDate(preclickDay)		
	}
	function nextDay() {		
		preclickDay--
		updateDate(preclickDay)
	}
	//设置一个函数
	function updateDate(datatimeval){
		var date = new Date(); //获取当前时间  
		date.setDate(date.getDate() - datatimeval); //设置天数 -1 天  
		var time = date.Format("yyyy-MM-dd");
		$("#nowDate").val(time);			
	}
	
	//点击按钮实现前一周后一周
	function preWeek(){
		preclickWeek = preclickWeek+7;
		updateWeek(preclickWeek)		
	}
	function nextWeek() {		
		preclickWeek = preclickWeek -7;
		updateWeek(preclickWeek)
	}
	//设置一个函数
	function updateWeek(datatimeval){
		var date = new Date(); //获取当前时间  
		date.setDate(date.getDate() - datatimeval); //设置周数 -1 周  
		var time = date.Format("yyyy-MM-dd");
		var textVal = $("#nowWeek").val(time);			
	}

	//点击按钮实现前一月后一月
	function preMonth(){
		preclickMonth++;
		updateMonth(preclickMonth)		
	}
	function nextMonth() {		
		preclickMonth--;
		updateMonth(preclickMonth)
	}
	//设置一个函数
	function updateMonth(datatimeval){
		var date = new Date(); //获取当前时间  
		date.setMonth(date.getMonth() - datatimeval); //设置月数 -1 月  
		var time = date.Format("yyyy-MM-dd");
		var textVal = $("#nowMonth").val(time);			
	}
	
	//echarts饼图
	// 基于准备好的dom，初始化echarts实例
	var myChart = echarts.init(document.getElementById('dayEcharts'));
	// 指定图表的配置项和数据
	option = {
		title: {
			text: '某站点用户访问来源',
			subtext: '纯属虚构',
			x: 'center'
		},
		tooltip: {
			trigger: 'item',
			formatter: "{a} <br/>{b} : {c} ({d}%)"
		},
		legend: {
			orient: 'vertical',
			left: 'left',
			data: ['日访', '首访', '复访', '成交']
		},
		series: [{
			name: '访问来源',
			type: 'pie',
			radius: '55%',
			center: ['50%', '40%'],
			data: [{
					value: 335,
					name: '日访'
				},
				{
					value: 310,
					name: '首访'
				},
				{
					value: 234,
					name: '复访'
				},
				{
					value: 135,
					name: '成交'
				}
			],
			itemStyle: {
				emphasis: {
					shadowBlur: 10,
					shadowOffsetX: 0,
					shadowColor: 'rgba(0, 0, 0, 0.5)'
				}
			}
		}]
	};

	// 使用刚指定的配置项和数据显示图表。
	myChart.setOption(option);	
	
	//周访图饼
	var myChart = echarts.init(document.getElementById('weekEcharts'));
	// 指定图表的配置项和数据
	option1 = {
		title: {
			text: '某站点用户访问来源',
			subtext: '纯属虚构',
			x: 'center'
		},
		tooltip: {
			trigger: 'item',
			formatter: "{a} <br/>{b} : {c} ({d}%)"
		},
		legend: {
			orient: 'vertical',
			left: 'left',
			data: ['日访','周访', '首访', '复访', '成交']
		},
		series: [{
			name: '访问来源',
			type: 'pie',
			radius: '55%',
			center: ['50%', '40%'],
			data: [{
					value: 335,
					name: '日访'
				},
				{
					value: 365,
					name: '周访'
				},
				{
					value: 310,
					name: '首访'
				},
				{
					value: 234,
					name: '复访'
				},
				{
					value: 135,
					name: '成交'
				}
			],
			itemStyle: {
				emphasis: {
					shadowBlur: 10,
					shadowOffsetX: 0,
					shadowColor: 'rgba(0, 0, 0, 0.5)'
				}
			}
		}]
	};
	// 使用刚指定的配置项和数据显示图表。
	myChart.setOption(option1);	
	
	//月访图饼
	var myChart = echarts.init(document.getElementById('monthEcharts'));
	// 指定图表的配置项和数据
	option1 = {
		title: {
			text: '某站点用户访问来源',
			subtext: '纯属虚构',
			x: 'center'
		},
		tooltip: {
			trigger: 'item',
			formatter: "{a} <br/>{b} : {c} ({d}%)"
		},
		legend: {
			orient: 'vertical',
			left: 'left',
			data: ['日访','月访', '首访', '复访', '成交']
		},
		series: [{
			name: '访问来源',
			type: 'pie',
			radius: '55%',
			center: ['50%', '40%'],
			data: [{
					value: 335,
					name: '日访'
				},
				{
					value: 365,
					name: '月访'
				},
				{
					value: 310,
					name: '首访'
				},
				{
					value: 234,
					name: '复访'
				},
				{
					value: 135,
					name: '成交'
				}
			],
			itemStyle: {
				emphasis: {
					shadowBlur: 10,
					shadowOffsetX: 0,
					shadowColor: 'rgba(0, 0, 0, 0.5)'
				}
			}
		}]
	};
	// 使用刚指定的配置项和数据显示图表。
	myChart.setOption(option1);	
</script>
</body>
</html>