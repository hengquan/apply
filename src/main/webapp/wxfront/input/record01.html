
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <title>客户数据中心-首访信息录入</title>
  <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="../css/bootstrap.min.css"/>
  <link rel="stylesheet" href="../css/index.css"/>
  <link rel="stylesheet" href="../css/main.css">
  <link rel="stylesheet" href="../css/zepto.mdater.css">
  <script src="../../static/js/jquery.min.js" type="text/javascript"></script>
  <script src="../js/CONSTANT.js" type="text/javascript"></script>
  <script src="../js/common.utils.js" type="text/javascript"></script>
  <script src="../js/bootstrap.min.js"></script>
  <script src="../js/vue.js"></script>
  <script src="../js/zepto.js"></script>
  <script src="../js/zepto.mdater.js"></script>
</head>
<body>
<!-- 第1页 -->
<div class="container" id="step1" style="display:none">
  <div class="item_sflr row">
    <div class="col-title col-title-4">置业顾问</div>
    <div class="col-input-4">
      <input type="text" placeholder="" name="user" value="" readonly/>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-6">本次到访时间</div>
    <div class="col-input-6">
      <input type="text" class="datatime" placeholder="" name="curTime" readonly/>
    </div>
  </div>
  <div class="item_sflr row" id="projArea" style="display:none;">
    <div class="col-title col-title-4">项目选择</div>
    <div class="col-input-4">
      <input class="input_style form-group" id="proj" placeholder="" v-model="u_proj" readonly data-toggle="modal" data-target="#projModal"/>
    </div>
  </div>
  <div class="modal fade" id="projModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span>&times</span></button>
          <h4 class="modal-title">项目选择</h4>
        </div>
        <div class="modal-body" id="projData">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanProj()" id="cleanProjBtn" style="display:none;">清除并关闭</button>
        </div>
      </div>
    </div>
  </div>
  <div class="line"></div>
  <div class="item_sflr row">
    <div class="col-title col-title-2">姓名</div>
    <div class="col-input">
      <input type="text" placeholder="" name="custName"/>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-2">电话</div>
    <div class="col-input">
      <input type="text" placeholder="" name="custPhone"/>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-2">性别</div>
    <div class="col-input">
      <span class="input_style form-group" id="sex" data-toggle="modal" data-target="#sexModal">123</span>
    </div>
  </div>
  <div class="modal fade" id="sexModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span>&times</span></button>
          <h4 class="modal-title">性别</h4>
        </div>
        <div class="modal-body">
          <label><input type="radio" name="sex" value="002001-男" _text="男" @click="selSex()"/> 男 </label>
          <label><input type="radio" name="sex" value="002001-女" _text="女" @click="selSex()"/> 女 </label>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanSex()" id="cleanSexBtn" style="display:none;">清除并关闭</button>
        </div>
      </div>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-7">第一次获知时间</div>
    <div class="col-input-7">
      <input type="text" placeholder="" name="firstTime" class="datatime" readonly/>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-3">年龄段</div>
    <div class="col-input-3">
      <input class="input_style form-group" id="ageGroup" placeholder="" v-model="u_ageGroup" readonly="readonly" data-toggle="modal" data-target="#ageGroupModal"/>
    </div>
  </div>
  <div class="modal fade" id="ageGroupModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span>&times</span></button>
          <h4 class="modal-title">年龄段</h4>
        </div>
        <div class="modal-body">
          <label><input type="radio" name="ageGroup" value="003001-25岁以下-0~25" _text="25岁以下" @click="selAgeGroup()"/> 25岁以下 </label>
          <label><input type="radio" name="ageGroup" value="003002-26~35岁-26~35" _text="26~35岁" @click="selAgeGroup()"/> 26~35岁 </label>
          <label><input type="radio" name="ageGroup" value="003003-36~45岁-36~45" _text="36~45岁" @click="selAgeGroup()"/> 36~45岁 </label>
          <label><input type="radio" name="ageGroup" value="003004-46~55岁-46~55" _text="46~55岁" @click="selAgeGroup()"/> 46~55岁 </label>
          <label><input type="radio" name="ageGroup" value="003005-56岁以上-56~" _text="56岁以上" @click="selAgeGroup()"/> 56岁以上 </label>
          <label class="wflj"><input type="radio" name="ageGroup" value="003000-无法了解" _text="无法了解" @click="selAgeGroup()"/> 无法了解 </label>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanAgeGroup()" id="cleanAgeGroupBtn" style="display:none;">清除并关闭</button>
        </div>
      </div>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-4">居住区域</div>
    <div class="col-input-4">
      <input type="text" placeholder="" name="localResidence"/>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-4">工作区域</div>
    <div class="col-input-4">
      <input type="text" placeholder="" name="localWorkArea"/>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-4">外埠居住</div>
    <div class="col-input-4">
      <input type="text" placeholder="" name="outResidence"/>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-4">外埠工作</div>
    <div class="col-input-4">
      <input type="text" placeholder="" name="outWorkArea"/>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-4">家庭状况</div>
    <div class="col-input-4">
      <input class="input_style form-group" id="familyStatus" placeholder="" v-model="u_familyStatus" readonly data-toggle="modal" data-target="#familyStatusModal"/>
    </div>
  </div>
  <div class="modal fade" id="familyStatusModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span>&times</span></button>
          <h4 class="modal-title">家庭状况</h4>
        </div>
        <div class="modal-body">
          <label><input type="radio" name="familyStatus" value="005001-单身" _text="单身" @click="selFamilyStatus()"/> 单身 </label>
          <label><input type="radio" name="familyStatus" value="005002-夫妻" _text="夫妻" @click="selFamilyStatus()"/> 夫妻 </label>
          <label><input type="radio" name="familyStatus" value="005003-一孩家庭" _text="一孩家庭" @click="selFamilyStatus()"/> 一孩家庭 </label>
          <label><input type="radio" name="familyStatus" value="005004-俩孩家庭" _text="俩孩家庭" @click="selFamilyStatus()"/> 俩孩家庭 </label>
          <label><input type="radio" name="familyStatus" value="005005-三孩及以上家庭" _text="三孩及以上家庭" @click="selFamilyStatus()"/> 三孩及以上家庭 </label>
          <label><input type="radio" name="familyStatus" value="005006-三代同堂" _text="三代同堂" @click="selFamilyStatus()"/> 三代同堂 </label>
          <label class="wflj"><input type="radio" name="familyStatus" value="005000-无法了解" _text="无法了解" @click="selFamilyStatus()"/> 无法了解 </label>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanFamilyStatus()" id="cleanFamilyStatusBtn" style="display:none;">清除并关闭</button>
        </div>
      </div>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-4">出行方式</div>
    <div class="col-input-4">
      <input class="input_style form-group" id="trafficType" placeholder="" v-model="u_trafficType" readonly data-toggle="modal" data-target="#trafficTypeModal"/>
    </div>
  </div>
  <div class="modal fade" id="trafficTypeModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span>&times</span></button>
          <h4 class="modal-title">出行方式</h4>
        </div>
        <div class="modal-body">
          <label><input type="checkbox" name="trafficType" value="006001-自驾车" _text="自驾车"/> 自驾车 </label>
          <label><input type="checkbox" name="trafficType" value="006002-公交" _text="公交"/> 公交 </label>
          <label><input type="checkbox" name="trafficType" value="006003-地铁" _text="地铁"/> 地铁 </label>
          <label><input type="checkbox" name="trafficType" value="006004-步行" _text="步行"/> 步行 </label>
          <label><input type="checkbox" name="trafficType" value="006005-打车" _text="打车"/> 打车 </label>
          <label class="wflj"><input type="checkbox" name="trafficType" value="006000-无法了解" _text="无法了解"/> 无法了解 </label><br/>
          <label><input type="checkbox" name="trafficType" value="006999-其他" _text="其他" @click="clickTrafficOther()"/> 其他 </label>
          <input type="text" placeholder="" name="trafficDesc" style="display:none;"/>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanTrafficType(1)">关闭</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanTrafficType(2)" id="cleanTrafficTypeBtn" style="display:none;">清除并关闭</button>
          <button type="button" class="btn btn-primary" @click="selTrafficType()">确定</button>
        </div>
      </div>
    </div>
  </div>
  <div class="item-zhc row-link" style="margin-top:1.5rem;" onClick="step1Next()"><a href="#">下一步</a></div>
</div>
<!-- 第2页 -->
<div class="container" id="step2" style="display:none">
  <div class="item_sflr row">
    <div class="col-title col-title-4">购房资格</div>
    <div class="col-input-4">
      <input class="input_style form-group" id="buyQualify" placeholder="" v-model="u_buyQualify" readonly data-toggle="modal" data-target="#buyQualifyModal"/>
    </div>
  </div>
  <div class="modal fade" id="buyQualifyModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span>&times</span></button>
          <h4 class="modal-title">购房资格</h4>
        </div>
        <div class="modal-body">
          <label><input type="radio" name="buyQualify" value="004001-有" _text="有" @click="selBuyQualify()"/> 有 </label>
          <label><input type="radio" name="buyQualify" value="004002-无(换产权名解决)" _text="无(换产权名解决)" @click="selBuyQualify()"/> 无(换产权名解决) </label>
          <label><input type="radio" name="buyQualify" value="004003-无(房产过户解决)" _text="无(房产过户解决)" @click="selBuyQualify()"/> 无(房产过户解决) </label>
          <label><input type="radio" name="buyQualify" value="004004-无(离婚解决)" _text="无(离婚解决)" @click="selBuyQualify()"/> 无(离婚解决) </label>
          <label><input type="radio" name="buyQualify" value="004005-无(公司产权解决)" _text="无(公司产权解决)" @click="selBuyQualify()"/> 无(公司产权解决) </label>
          <label><input type="radio" name="buyQualify" value="004006-无(其它解决)" _text="无(其它解决)" @click="selBuyQualify()"/> 无(其它解决) </label>
          <label class="wflj"><input type="radio" name="buyQualify" value="004000-无法了解" _text="无法了解" @click="selBuyQualify()"/> 无法了解 </label>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanBuyQualify()" id="cleanBuyQualifyBtn" style="display:none;">清除并关闭</button>
        </div>
      </div>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-4">从事行业</div>
    <div class="col-input-4">
      <input class="input_style form-group" id="workIndustry" placeholder="" v-model="u_workIndustry" readonly data-toggle="modal" data-target="#workIndustryModal"/>
    </div>
  </div>
  <div class="modal fade" id="workIndustryModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span>&times</span></button>
          <h4 class="modal-title">从事行业</h4>
        </div>
        <div class="modal-body">
          <label><input type="radio" name="workIndustry" value="007001-建筑房地产/装修" _text="建筑房地产/装修" @click="selWorkIndustry()"/> 建筑房地产/装修 </label>
          <label><input type="radio" name="workIndustry" value="007002-旅游/文化/媒体" _text="旅游/文化/媒体" @click="selWorkIndustry()"/> 旅游/文化/媒体 </label>
          <label><input type="radio" name="workIndustry" value="007003-能源" _text="能源" @click="selWorkIndustry()"/> 能源 </label>
          <label><input type="radio" name="workIndustry" value="007004-IT" _text="IT" @click="selWorkIndustry()"/> IT </label>
          <label><input type="radio" name="workIndustry" value="007005-金融投资" _text="金融投资" @click="selWorkIndustry()"/> 金融投资 </label>
          <label><input type="radio" name="workIndustry" value="007006-外贸" _text="外贸" @click="selWorkIndustry()"/> 外贸 </label>
          <label><input type="radio" name="workIndustry" value="007007-交通/物流/零售" _text="交通/物流/零售" @click="selWorkIndustry()"/> 交通/物流/零售 </label>
          <label><input type="radio" name="workIndustry" value="007008-餐饮" _text="餐饮" @click="selWorkIndustry()"/> 餐饮 </label>
          <label><input type="radio" name="workIndustry" value="007009-医疗" _text="医疗" @click="selWorkIndustry()"/> 医疗 </label>
          <label><input type="radio" name="workIndustry" value="007010-教育" _text="教育" @click="selWorkIndustry()"/> 教育 </label>
          <label><input type="radio" name="workIndustry" value="007011-通讯" _text="通讯" @click="selWorkIndustry()"/> 通讯 </label>
          <label><input type="radio" name="workIndustry" value="007012-律师/法务" _text="律师/法务" @click="selWorkIndustry()"/> 律师/法务 </label>
          <label><input type="radio" name="workIndustry" value="007013-退休" _text="退休" @click="selWorkIndustry()"/> 自驾车 </label>
          <label class="wflj"><input type="radio" name="workIndustry" value="007000-无法了解" _text="无法了解" @click="selWorkIndustry()"/> 无法了解 </label><br/>
          <label><input type="radio" name="workIndustry" value="007999-其他" _text="其他" @click="clickWorkIndustry()"/> 其他 </label>
          <input type="text" placeholder="" name="workIndustryDesc" style="display:none;"/>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanWorkIndustry()" id="cleanWorkIndustryBtn" style="display:none;">清除并关闭</button>
          <button type="button" class="btn btn-primary" @click="selWorkIndustry()">确定</button>
        </div>
      </div>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-4">企业性质</div>
    <div class="col-input-4">
      <input class="input_style form-group" id="enterpriseType" placeholder="" v-model="u_enterpriseType" readonly data-toggle="modal" data-target="#enterpriseTypeModal"/>
    </div>
  </div>
  <div class="modal fade" id="enterpriseTypeModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span>&times</span></button>
          <h4 class="modal-title">企业性质</h4>
        </div>
        <div class="modal-body">
          <label><input type="radio" name="enterpriseType" value="008001-国家行政机关及国企" _text="国家行政机关及国企" @click="selEnterpriseType()"/> 国家行政机关及国企 </label>
          <label><input type="radio" name="enterpriseType" value="008002-民营企业" _text="民营企业" @click="selEnterpriseType()"/> 民营企业 </label>
          <label><input type="radio" name="enterpriseType" value="008003-外资企业" _text="外资企业" @click="selEnterpriseType()"/> 外资企业 </label>
          <label><input type="radio" name="enterpriseType" value="008004-合资企业" _text="合资企业" @click="selEnterpriseType()"/> 合资企业 </label>
          <label><input type="radio" name="enterpriseType" value="008005-私营" _text="私营" @click="selEnterpriseType()"/> 私营 </label>
          <label class="wflj"><input type="radio" name="enterpriseType" value="008000-无法了解" _text="无法了解" @click="selEnterpriseType()" color="red"/> 无法了解 </label>
          <label><input type="radio" name="enterpriseType" value="008999-其他" _text="其他" @click="clickEnterpriseType()"/> 其他 </label>
          <input type="text" placeholder="" name="enterpriseTypeDesc" style="display:none;"/>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanEnterpriseType()" id="cleanEnterpriseTypeBtn" style="display:none;">清除并关闭</button>
          <button type="button" class="btn btn-primary" @click="selEnterpriseType()">确定</button>
        </div>
      </div>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-4">认知渠道</div>
    <div class="col-input-4">
      <input class="input_style form-group" id="knowWay" placeholder="" v-model="u_knowWay" readonly data-toggle="modal" data-target="#knowWayModal"/>
    </div>
  </div>
  <div class="modal fade" id="knowWayModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span>&times</span></button>
          <h4 class="modal-title">认知渠道</h4>
        </div>
        <div class="modal-body">
          <label><input type="checkbox" name="knowWay" value="013001-户外广告牌" _text="户外广告牌" @click="clickKnowWayGGP()"/> 户外广告牌 </label>
          <input type="text" placeholder="" name="knowWayGGP" style="display;" readonly/><br/>
          <label><input type="checkbox" name="knowWay" value="013002-网络" _text="网络"/> 网络 </label>
          <label><input type="checkbox" name="knowWay" value="013003-短信" _text="短信"/> 短信 </label>
          <label><input type="checkbox" name="knowWay" value="013004-纸媒" _text="纸媒"/> 纸媒 </label>
          <label><input type="checkbox" name="knowWay" value="013005-路过" _text="路过"/> 路过 </label>
          <label><input type="checkbox" name="knowWay" value="013006-朋友介绍" _text="朋友介绍"/> 朋友介绍 </label><br/>
          <label><input type="checkbox" name="knowWay" value="013007-渠道介绍" _text="渠道介绍" @click="clickKnowWayJS()"/> 渠道介绍 </label>
          <input type="text" placeholder="" name="knowWayJS" style="display;" readonly/>公司<br/>
          <label><input type="checkbox" name="knowWay" value="013008-巡展" _text="巡展"/> 巡展 </label>
          <label><input type="checkbox" name="knowWay" value="013009-广播" _text="广播"/> 广播 </label>
          <label><input type="checkbox" name="knowWay" value="013010-电CALL" _text="电CALL"/> 电CALL </label><br/>
          <label><input type="checkbox" name="knowWay" value="013011-直投" _text="直投"/> 直投 </label>
          <label><input type="checkbox" name="knowWay" value="013012-活动" _text="活动"/> 活动 </label>
          <label><input type="checkbox" name="knowWay" value="013013-DM单" _text="DM单"/> DM单 </label>
          <label><input type="checkbox" name="knowWay" value="013014-外联" _text="外联"/> 外联 </label>
          <label><input type="checkbox" name="knowWay" value="013015-老带新" _text="老带新"/> 老带新 </label>
          <label class="wflj"><input type="checkbox" name="knowWay" value="013000-无法了解" _text="无法了解"/> 无法了解 </label><br/>
          <label><input type="checkbox" name="knowWay" value="013999-其他" _text="其他" @click="clickKnowWayOther()"/> 其他 </label>
          <input type="text" placeholder="" name="knowWayDesc" style="display:none;"/>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanKnowWay(1)">关闭</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanKnowWay(2)" id="cleanKnowWayBtn" style="display:none;">清除并关闭</button>
          <button type="button" class="btn btn-primary" @click="selKnowWay()">确定</button>
        </div>
      </div>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-4">预估身价</div>
    <div class="col-input-4">
      <input class="input_style form-group" id="estCustWorth" placeholder="" v-model="u_estCustWorth" readonly data-toggle="modal" data-target="#estCustWorthModal"/>
    </div>
  </div>
  <div class="modal fade" id="estCustWorthModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span>&times</span></button>
          <h4 class="modal-title">预估身价</h4>
        </div>
        <div class="modal-body">
          <label><input type="radio" name="estCustWorth" value="015001-1千万以下-0~1000" _text="1千万以下" @click="selEstCustWorth()"/> 1千万以下 </label>
          <label><input type="radio" name="estCustWorth" value="015002-1千~5千万-1000~5000" _text="1千~5千万" @click="selEstCustWorth()"/> 1千~5千万 </label>
          <label><input type="radio" name="estCustWorth" value="015003-5千万~1亿-5000~10000" _text="5千万~1亿" @click="selEstCustWorth()"/> 5千万~1亿 </label>
          <label><input type="radio" name="estCustWorth" value="015004-1~3亿-10000~30000" _text="1~3亿" @click="selEstCustWorth()"/> 1~3亿 </label>
          <label><input type="radio" name="estCustWorth" value="015005-3亿以上-30000~" _text="3亿以上" @click="selEstCustWorth()"/> 3亿以上 </label>
          <label class="wflj"><input type="radio" name="estCustWorth" value="015000-无法了解" _text="无法了解" @click="selEstCustWorth()"/> 无法了解 </label>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanEstCustWorth()" id="cleanEstCustWorthBtn" style="display:none;">清除并关闭</button>
        </div>
      </div>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-4">重点投资</div>
    <div class="col-input-4">
      <input class="input_style form-group" id="investType" placeholder="" v-model="u_investType" readonly data-toggle="modal" data-target="#investTypeModal"/>
    </div>
  </div>
  <div class="modal fade" id="investTypeModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span>&times</span></button>
          <h4 class="modal-title">重点投资</h4>
        </div>
        <div class="modal-body">
          <label><input type="checkbox" name="investType" value="016001-股票" _text="股票"/> 股票 </label>
          <label><input type="checkbox" name="investType" value="016002-基金" _text="基金"/> 基金 </label>
          <label><input type="checkbox" name="investType" value="016003-黄金" _text="黄金"/> 黄金 </label>
          <label><input type="checkbox" name="investType" value="016004-股指期货" _text="股指期货"/> 股指期货 </label>
          <label><input type="checkbox" name="investType" value="016005-外汇" _text="外汇"/> 外汇 </label>
          <label><input type="checkbox" name="investType" value="016006-艺术品" _text="艺术品"/> 艺术品 </label>
          <label><input type="checkbox" name="investType" value="016007-保险" _text="保险"/> 保险 </label>
          <label><input type="checkbox" name="investType" value="016008-民间投资" _text="民间投资"/> 民间投资 </label>
          <label class="wflj"><input type="checkbox" name="investType" value="016000-无法了解" _text="无法了解"/> 无法了解 </label><br/>
          <label><input type="checkbox" name="investType" value="016999-其他" _text="其他" @click="clickInvestTypeOther()"/> 其他 </label>
          <input type="text" placeholder="" name="investTypeDesc" style="display:none;"/>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanInvestType(1)">关闭</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanInvestType(2)" id="cleanInvestTypeBtn" style="display:none;">清除并关闭</button>
          <button type="button" class="btn btn-primary" @click="selInvestType()">确定</button>
        </div>
      </div>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-5">资金筹备期</div>
    <div class="col-input-5">
      <input class="input_style form-group" id="captalPrepSection" placeholder="" v-model="u_captalPrepSection" readonly data-toggle="modal" data-target="#captalPrepSectionModal"/>
    </div>
  </div>
  <div class="modal fade" id="captalPrepSectionModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span>&times</span></button>
          <h4 class="modal-title">资金筹备期</h4>
        </div>
        <div class="modal-body">
          <label><input type="radio" name="captalPrepSection" value="017001-1个月内-0~1" _text="1个月内" @click="selCaptalPrepSection()"/> 1个月内 </label>
          <label><input type="radio" name="captalPrepSection" value="017002-1~3月-1~3" _text="1~3月" @click="selCaptalPrepSection()"/> 1~3月 </label>
          <label><input type="radio" name="captalPrepSection" value="017003-3~6月-3~6" _text="3~6月" @click="selCaptalPrepSection()"/> 3~6月 </label>
          <label><input type="radio" name="captalPrepSection" value="017004-6~12月-6~12" _text="6~12月" @click="selCaptalPrepSection()"/> 6~12月 </label>
          <label><input type="radio" name="captalPrepSection" value="017005-12月以上-12~" _text="12月以上" @click="selCaptalPrepSection()"/> 12月以上 </label>
          <label class="wflj"><input type="radio" name="captalPrepSection" value="017000-无法了解" _text="无法了解" @click="selCaptalPrepSection()"/> 无法了解 </label>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanCaptalPrepSection()" id="cleanCaptalPrepSectionBtn" style="display:none;">清除并关闭</button>
        </div>
      </div>
    </div>
  </div>
  <div class="row row-link">
    <div class="col-50" style="margin-top:1.5rem;" onClick="step2Prev()"><a href="#">上一步</a></div>
    <div class="col-50" style="margin-top:1.5rem;" onClick="step2Next()"><a href="#">下一步</a></div>
  </div>
</div>
<!-- 第3页 -->
<div class="container" id="step3" style="display:none">
  <div class="item_sflr row">
    <div class="col-title col-title-6">关注产品类型</div>
    <div class="col-inpu-6t">
      <input class="input_style form-group" id="realtyProductType" placeholder="" v-model="u_realtyProductType" readonly data-toggle="modal" data-target="#realtyProductTypeModal"/>
    </div>
  </div>
  <div class="modal fade" id="realtyProductTypeModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span>&times</span></button>
          <h4 class="modal-title">关注产品类型</h4>
        </div>
        <div class="modal-body">
          <label>别墅&nbsp;(
          <input type="checkbox" name="realtyProductType" value="009001001-独栋" _text="别墅-独栋"/> 独栋 </label>
          <label><input type="checkbox" name="realtyProductType" value="009001002-类独栋" _text="别墅-类独栋"/> 类独栋 </label>
          <label><input type="checkbox" name="realtyProductType" value="009001003-双拼" _text="别墅-双拼"/> 双拼 </label>
          <label><input type="checkbox" name="realtyProductType" value="009001004-联排" _text="别墅-联排"/> 联排 </label>
          <label><input type="checkbox" name="realtyProductType" value="009001005-上叠" _text="别墅-上叠"/> 上叠 </label>
          <label><input type="checkbox" name="realtyProductType" value="009001006-下叠" _text="别墅-下叠"/> 下叠 )</label><br/>
          <label>平层&nbsp;(
          <input type="checkbox" name="realtyProductType" value="009002001-两居及以下" _text="平层-两居及以下"/> 两居及以下 </label>
          <label><input type="checkbox" name="realtyProductType" value="009002002-三居" _text="平层-三居"/> 三居 </label>
          <label><input type="checkbox" name="realtyProductType" value="009002003-四居" _text="平层-四居"/> 四居 </label>
          <label><input type="checkbox" name="realtyProductType" value="009002004-五居及以上" _text="平层-五居及以上"/> 五居及以上 )</label><br/>
          <label><input type="checkbox" name="realtyProductType" value="009003-商业" _text="商业"/> 商业 </label>
          <label><input type="checkbox" name="realtyProductType" value="00904-商业办公" _text="商业办公"/> 商业办公 </label>
          <label class="wflj"><input type="checkbox" name="realtyProductType" value="009000-无法了解" _text="无法了解"/> 无法了解 </label><br/>
          <label><input type="checkbox" name="realtyProductType" value="009999-其他" _text="其他" @click="clickRealtyProductTypeOther()"/> 其他 </label>
          <input type="text" placeholder="" name="realtyProductTypeDesc" style="display:none;"/>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanRealtyProductType(1)">关闭</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanRealtyProductType(2)" id="cleanRealtyProductTypeBtn" style="display:none;">清除并关闭</button>
          <button type="button" class="btn btn-primary" @click="selRealtyProductType()">确定</button>
        </div>
      </div>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-6">关注区间面积</div>
    <div class="col-input-6">
      <input class="input_style form-group" id="attentAcreage" placeholder="" v-model="u_attentAcreage" readonly data-toggle="modal" data-target="#attentAcreageModal"/>
    </div>
  </div>
  <div class="modal fade" id="attentAcreageModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span>&times</span></button>
          <h4 class="modal-title">关注区间面积</h4>
        </div>
        <div class="modal-body">
          <label><input type="radio" name="attentAcreage" value="010001-200㎡以下-0~200" _text="200㎡以下" @click="selAttentAcreage()"/> 200㎡以下 </label>
          <label><input type="radio" name="attentAcreage" value="010002-200~300㎡-200~300" _text="200~300㎡" @click="selAttentAcreage()"/> 200~300㎡ </label>
          <label><input type="radio" name="attentAcreage" value="010003-300~400㎡-300~400" _text="300~400㎡" @click="selAttentAcreage()"/> 300~400㎡ </label>
          <label><input type="radio" name="attentAcreage" value="010004-400~500㎡-400~500" _text="400~500㎡" @click="selAttentAcreage()"/> 400~500㎡ </label>
          <label><input type="radio" name="attentAcreage" value="010005-500~600㎡-500~600" _text="500~600㎡" @click="selAttentAcreage()"/> 500~600㎡ </label>
          <label><input type="radio" name="attentAcreage" value="010006-600~700㎡-600~700" _text="600~700㎡" @click="selAttentAcreage()"/> 600~700㎡ </label>
          <label><input type="radio" name="attentAcreage" value="010007-700~800㎡-700~800" _text="700~800㎡" @click="selAttentAcreage()"/> 700~800㎡ </label>
          <label><input type="radio" name="attentAcreage" value="010008-800㎡以上-800~" _text="800㎡以上" @click="selAttentAcreage()"/> 800㎡以上 </label><br/>
          <label class="wflj"><input type="radio" name="attentAcreage" value="010000-无法了解" _text="无法了解" @click="selAttentAcreage()"/> 无法了解 </label><br/>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanAttentAcreage()" id="cleanAttentAcreageBtn" style="display:none;">清除并关闭</button>
        </div>
      </div>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-5">接受总房款</div>
    <div class="col-input-5">
      <input class="input_style form-group" id="priceSection" placeholder="" v-model="u_priceSection" readonly data-toggle="modal" data-target="#priceSectionModal"/>
    </div>
  </div>
  <div class="modal fade" id="priceSectionModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span>&times</span></button>
          <h4 class="modal-title">接受总房款</h4>
        </div>
        <div class="modal-body">
          <label><input type="radio" name="priceSection" value="011001-500万以下-0~500" _text="500万以下" @click="selPriceSection()"/> 500万以下 </label>
          <label><input type="radio" name="priceSection" value="011002-500~1000万-500~1000" _text="500~1000万" @click="selPriceSection()"/> 500-1000万 </label>
          <label><input type="radio" name="priceSection" value="011003-1000~1500万-1000~1500" _text="1000~1500万" @click="selPriceSection()"/> 1000~1500万 </label>
          <label><input type="radio" name="priceSection" value="011004-1500~2000万-1500~2000" _text="1500~2000万" @click="selPriceSection()"/> 1500~2000万 </label>
          <label><input type="radio" name="priceSection" value="011005-2000~3000万-2000~3000" _text="2000~3000万" @click="selPriceSection()"/> 2000~3000万 </label>
          <label><input type="radio" name="priceSection" value="011006-3000~4000万-3000~4000" _text="3000~4000万" @click="selPriceSection()"/> 3000~4000万 </label>
          <label><input type="radio" name="priceSection" value="011007-4000~5000万-4000~5000" _text="4000~5000万" @click="selPriceSection()"/> 4000~5000万 </label>
          <label><input type="radio" name="priceSection" value="011008-5000~6000万-5000~6000" _text="5000~6000万" @click="selPriceSection()"/> 5000~6000万 </label>
          <label><input type="radio" name="priceSection" value="011009-6000~8000万-6000~8000" _text="6000~8000万" @click="selPriceSection()"/> 6000~8000万 </label>
          <label><input type="radio" name="priceSection" value="011010-8000万以上-8000~" _text="8000万以上" @click="selPriceSection()"/> 8000万以上 </label>
          <label class="wflj"><input type="radio" name="priceSection" value="011000-无法了解" _text="无法了解" @click="selPriceSection()"/> 无法了解 </label><br/>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanPriceSection()" id="cleanPriceSectionBtn" style="display:none;">清除并关闭</button>
        </div>
      </div>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-4">购房目的</div>
    <div class="col-input-4">
      <input class="input_style form-group" id="buyPurpose" placeholder="" v-model="u_buyPurpose" readonly data-toggle="modal" data-target="#buyPurposeModal"/>
    </div>
  </div>
  <div class="modal fade" id="buyPurposeModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span>&times</span></button>
          <h4 class="modal-title">购房目的</h4>
        </div>
        <div class="modal-body">
          <label><input type="radio" name="buyPurpose" value="012001-自住第一居所" _text="自住第一居所" @click="selBuyPurpose()"/> 自住第一居所 </label>
          <label><input type="radio" name="buyPurpose" value="012002-自住第二居所" _text="自住第二居所" @click="selBuyPurpose()"/> 自住第二居所 </label>
          <label><input type="radio" name="buyPurpose" value="012003-为子女购房" _text="为子女购房" @click="selBuyPurpose()"/> 为子女购房 </label>
          <label><input type="radio" name="buyPurpose" value="012004-为父母购房" _text="为父母购房" @click="selBuyPurpose()"/> 为父母购房 </label>
          <label><input type="radio" name="buyPurpose" value="012005-自住兼投资" _text="自住兼投资" @click="selBuyPurpose()"/> 自住兼投资 </label>
          <label><input type="radio" name="buyPurpose" value="012006-仅投资" _text="仅投资" @click="selBuyPurpose()"/> 仅投资 </label>
          <label class="wflj"><input type="radio" name="buyPurpose" value="012000-无法了解" _text="无法了解" @click="selBuyPurpose()"/> 无法了解 </label><br/>
          <label><input type="radio" name="buyPurpose" value="012999-其他" _text="其他" @click="clickBuyPurpose()"/> 其他 </label>
          <input type="text" placeholder="" name="buyPurposeDesc" style="display:none;"/>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanBuyPurpose()" id="cleanBuyPurposeBtn" style="display:none;">清除并关闭</button>
          <button type="button" class="btn btn-primary" @click="selBuyPurpose()">确定</button>
        </div>
      </div>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-6">对本案关注点</div>
    <div class="col-input-6">
      <input class="input_style form-group" id="attentionPoint" placeholder="" v-model="u_attentionPoint" readonly data-toggle="modal" data-target="#attentionPointModal"/>
    </div>
  </div>
  <div class="modal fade" id="attentionPointModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span>&times</span></button>
          <h4 class="modal-title">对本案关注点</h4>
        </div>
        <div class="modal-body">
          <label><input type="checkbox" name="attentionPoint" value="014001-位置" _text="位置"/> 位置 </label>
          <label><input type="checkbox" name="attentionPoint" value="014002-产品类型" _text="产品类型"/> 产品类型 </label>
          <label><input type="checkbox" name="attentionPoint" value="014003-交通" _text="交通"/> 交通 </label>
          <label><input type="checkbox" name="attentionPoint" value="014004-区域环境" _text="区域环境"/> 区域环境 </label>
          <label><input type="checkbox" name="attentionPoint" value="014005-价格" _text="价格"/> 价格 </label>
          <label><input type="checkbox" name="attentionPoint" value="014006-户型" _text="户型"/> 户型 </label>
          <label><input type="checkbox" name="attentionPoint" value="014007-花园面积" _text="花园面积"/> 花园面积 </label>
          <label><input type="checkbox" name="attentionPoint" value="014008-园林环境" _text="园林环境"/> 园林环境 </label>
          <label><input type="checkbox" name="attentionPoint" value="014009-科技设备" _text="科技设备"/> 科技设备 </label>
          <label><input type="checkbox" name="attentionPoint" value="014010-交房时间" _text="交房时间"/> 交房时间 </label>
          <label><input type="checkbox" name="attentionPoint" value="014011-社区配套" _text="社区配套"/> 社区配套 </label>
          <label><input type="checkbox" name="attentionPoint" value="014012-物业服务" _text="物业服务"/> 物业服务 </label>
          <label><input type="checkbox" name="attentionPoint" value="014013-教育环境" _text="教育环境"/> 教育环境 </label>
          <label><input type="checkbox" name="attentionPoint" value="014014-开发品牌" _text="开发品牌"/> 开发品牌 </label>
          <label><input type="checkbox" name="attentionPoint" value="014015-增值潜力" _text="增值潜力"/> 增值潜力 </label>
          <label><input type="checkbox" name="attentionPoint" value="014016-交房时间" _text="交房时间"/> 交房时间 </label>
          <label class="wflj"><input type="checkbox" name="attentionPoint" value="012000-无法了解" _text="无法了解"/> 无法了解 </label>
          <label><input type="checkbox" name="attentionPoint" value="012999-其他" _text="其他" @click="clickAttentionPointOther()"/> 其他 </label>
          <input type="text" placeholder="" name="attentionPointDesc" style="display:none;"/>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanAttentionPoint(1)">关闭</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanAttentionPoint(2)" id="cleanAttentionPointBtn" style="display:none;">清除并关闭</button>
          <button type="button" class="btn btn-primary" @click="selAttentionPoint()">确定</button>
        </div>
      </div>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-6">参观接待时间</div>
    <div class="col-input-6">
      <input class="input_style form-group" id="recepTimeSection" placeholder="" v-model="u_recepTimeSection" readonly data-toggle="modal" data-target="#recepTimeSectionModal"/>
    </div>
  </div>
  <div class="modal fade" id="recepTimeSectionModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span>&times</span></button>
          <h4 class="modal-title">参观接待时间</h4>
        </div>
        <div class="modal-body">
          <label><input type="radio" name="recepTimeSection" value="018001-15分钟以内-0~15" _text="15分钟以内" @click="selRecepTimeSection()"/> 15分钟以内 </label>
          <label><input type="radio" name="recepTimeSection" value="018002-15~30分钟-15~30" _text="15~30分钟" @click="selRecepTimeSection()"/> 15~30分钟 </label>
          <label><input type="radio" name="recepTimeSection" value="018003-30^60分钟-30~60" _text="30~60分钟" @click="selRecepTimeSection()"/> 30~60分钟 </label>
          <label><input type="radio" name="recepTimeSection" value="018004-60~120分钟-60~120" _text="60~120分钟" @click="selRecepTimeSection()"/> 60~120分钟 </label>
          <label><input type="radio" name="recepTimeSection" value="018005-120分钟以上-120~" _text="120分钟以上" @click="selRecepTimeSection()"/> 120分钟以上 </label>
          <label class="wflj"><input type="radio" name="recepTimeSection" value="018000-无法了解" _text="无法了解" @click="selRecepTimeSection()"/> 无法了解 </label>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanRecepTimeSection()" id="cleanRecepTimeSectionBtn" style="display:none;">清除并关闭</button>
        </div>
      </div>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-6">客户评级</div>
    <div class="col-input-6">
      <input class="input_style form-group" id="custCore" placeholder="" v-model="u_custCore" readonly data-toggle="modal" data-target="#custCoreModal"/>
    </div>
  </div>
  <div class="modal fade" id="custCoreModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span>&times</span></button>
          <h4 class="modal-title">客户评级</h4>
        </div>
        <div class="modal-body">
          <label><input type="radio" name="custCore" value="019001-A" _text="A" @click="selCustCore()"/> A </label>
          <label><input type="radio" name="custCore" value="019002-B" _text="B" @click="selCustCore()"/> B </label>
          <label><input type="radio" name="custCore" value="019003-C" _text="C" @click="selCustCore()"/> C </label>
          <label><input type="radio" name="custCore" value="019004-D" _text="D" @click="selCustCore()"/> D </label>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
          <button type="button" class="btn btn-default" data-dismiss="modal" @click="cleanCustCore()" id="cleanCustCoreBtn" style="display:none;">清除并关闭</button>
        </div>
      </div>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-8">本次置业比选项目</div>
    <div class="col-input">
      <textarea rows="3" placeholder="" name="compareProjs"></textarea>
    </div>
  </div>
  <div class="item_sflr row">
    <div class="col-title col-title-4">客户描述</div>
    <div class="col-input">
	  <textarea rows="3" placeholder="" name="custDescn"></textarea>
    </div>
  </div>
  <div class="row row-link">
    <div class="col-50" style="margin-top:1.5rem;" onClick="step3Prev()"><a href="#">上一步</a></div>
    <div class="col-50" style="margin-top:1.5rem;" onClick="commitData()"><a href="#">提交</a></div>
  </div>
</div>

<script>
var _uUserId="";
var _uProjId="";
var _uProjName="";
var _uSex="";
var _uAgeGroup="";
var _uFamilyStatus="";
var _uTrafficType="";
var _uTrafficTypeDesc="";
var _uBuyQualify="";
var _uWorkIndustry="";
var _uWorkIndustryDesc="";
var _uEnterpriseType="";
var _uEnterpriseTypeDesc="";
var _uRealtyProductType="";
var _uRealtyProductTypeDesc="";
var _uAttentAcreage="";
var _uPriceSection=""
var _uBuyPurpose=""
var _uBuyPurposeDesc=""
var _uKnowWay="";
var _uKnowWayDesc="";
var _uAttentionPoint="";
var _uAttentionPointDesc="";
var _uEstCustWorth="";
var _uInvestType="";
var _uInvestTypeDesc="";
var _uCaptalPrepSection="";
var _uRecepTimeSection="";
var _uCustCore="";
var _uLocalResidence="";
var _uLocalWorkarea="";
var _uOutResidence="";
var _uOutWorkarea="";

//复选单选处理
function selProj() {
  var choose=document.getElementsByName('proj');
  for (var i=0; i<choose.length; i++) {
    if (choose[i].checked) {
      $("#proj").val(choose[i].getAttribute("_text"));
      _uProjName=choose[i].getAttribute("_text");
      _uProjId=choose[i].value.substring(0, choose[i].value.indexOf('-'));
    }
  }
  $("#projModal").modal('hide');
  if (_uProjId!="") $("#cleanProjBtn").show();
}
var vueStep1=new Vue({
  el: "#step1",
  data:{
    u_proj: "",
    u_ageGroup: "",
    u_familyStatus: "",
    u_trafficType: ""
  },
  methods: {
    cleanProj: function() {
      this.u_proj="";
      _uProjId="";
      _uProjName="";
      $("#cleanProjBtn").hide();
      var choose=document.getElementsByName('proj');
      for (var i=0; i<choose.length; i++) if (choose[i].checked) choose[i].checked=false;
    },
    selSex: function() {
      var choose=document.getElementsByName('sex');
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked) {
          $("#sex").html(choose[i].getAttribute("_text"));
          _uSex=choose[i].value;
        }
      }
      $("#sexModal").modal('hide');
      if (_uSex!="") $("#cleanSexBtn").show();
    },
    cleanSex: function() {
      $("#sex").html("");
      _uSex="";
      $("#cleanSexBtn").hide();
      var choose=document.getElementsByName('sex');
      for (var i=0; i<choose.length; i++) if (choose[i].checked) choose[i].checked=false;
    },
    selAgeGroup: function() {
      var choose=document.getElementsByName('ageGroup');
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked) {
          this.u_ageGroup=choose[i].getAttribute("_text");
          _uGgeGroup=choose[i].value;
        }
      }
      $("#ageGroupModal").modal('hide');
      if (_uGgeGroup!="") $("#cleanAgeGroupBtn").show();
    },
    cleanAgeGroup: function() {
      this.u_ageGroup="";
      _uGgeGroup="";
      $("#cleanAgeGroupBtn").hide();
      var choose=document.getElementsByName('ageGroup');
      for (var i=0; i<choose.length; i++) if (choose[i].checked) choose[i].checked=false;
    },
    selFamilyStatus: function() {
      var choose=document.getElementsByName('familyStatus');
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked) {
          this.u_familyStatus=choose[i].getAttribute("_text");
          _uFamilyStatus=choose[i].value;
        }
      }
      $("#familyStatusModal").modal('hide');
      if (_uFamilyStatus!="") $("#cleanFamilyStatusBtn").show();
    },
    cleanFamilyStatus: function() {
      this.u_familyStatus="";
      _uFamilyStatus="";
      $("#cleanFamilyStatusBtn").hide();
      var choose=document.getElementsByName('familyStatus');
      for (var i=0; i<choose.length; i++) if (choose[i].checked) choose[i].checked=false;
    },
    selTrafficType: function() {
      var choose=document.getElementsByName('trafficType');
      var ttArray=[];
      var selOther=false;
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked) {
          var oneText=choose[i].getAttribute("_text");
          if (choose[i].getAttribute("_text")=='其他') {
            selOther=true;
            if ($.trim($("input[name='trafficDesc']").val())!="") {
              oneText=oneText+"("+$.trim($("input[name='trafficDesc']").val())+")";
              _uTrafficTypeDesc=$.trim($("input[name='trafficDesc']").val());
            }
          }
          ttArray.push(oneText);
          _uTrafficType+=","+choose[i].value;
        }
      }
//      if (selOther&&_uTrafficTypeDesc=="") alert("请录入“其他”交通出行方式");
//      else {
        if (_uTrafficType.length>0) _uTrafficType=_uTrafficType.substr(1);
        this.u_trafficType=ttArray;
        $("#trafficTypeModal").modal('hide');
        if (_uTrafficType!="") $("#cleanTrafficTypeBtn").show();
//      }
    },
    cleanTrafficType: function(type) {
      var canDeal=true;
      var _type=type?type:2;
      if (_type==1&&_uTrafficType!="") canDeal=false;
      if (canDeal) {
        this.u_trafficType="";
        _uTrafficType="";
        _uTrafficTypeDesc="";
        $("#cleanTrafficTypeBtn").hide();
        var choose=document.getElementsByName('trafficType');
        for (var i=0; i<choose.length; i++) if (choose[i].checked) choose[i].checked=false;
        $("input[name='trafficDesc']").val("");
        $("input[name='trafficDesc']").hide();
      }
    },
    clickTrafficOther: function() {
      var otherCheck=false;
      var choose=document.getElementsByName('trafficType');
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked&&choose[i].getAttribute("_text")=='其他') {
          otherCheck=true;
          break;
        }
      }
      if (otherCheck) $("input[name='trafficDesc']").show(); else $("input[name='trafficDesc']").hide();
    }
  }
});
$('#trafficTypeModal').on('hide.bs.modal', function () {
  vueStep1.cleanTrafficType(1);
});
var vueStep2=new Vue({
  el: "#step2",
  data:{
    u_buyQualify: "",
    u_workIndustry: "",
    u_enterpriseType: "",
    u_knowWay: "",
    u_tempKnowWayGGP: "",
    u_tempKnowWayJS: "",
    u_estCustWorth: "",
    u_investType: "",
    u_captalPrepSection: ""
  },
  methods: {
    selBuyQualify: function() {
      var choose=document.getElementsByName('buyQualify');
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked) {
          this.u_buyQualify=choose[i].getAttribute("_text");
          _uBuyQualify=choose[i].value;
        }
      }
      $("#buyQualifyModal").modal('hide');
      if (_uBuyQualify!="") $("#cleanBuyQualifyBtn").show();
    },
    cleanBuyQualify: function() {
      this.u_buyQualify="";
      _uBuyQualify="";
      $("#cleanBuyQualifyBtn").hide();
      var choose=document.getElementsByName('buyQualify');
      for (var i=0; i<choose.length; i++) if (choose[i].checked) choose[i].checked=false;
    },
    selWorkIndustry: function() {
      var choose=document.getElementsByName('workIndustry');
      var ttArray=[];
      var selOther=false;
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked) {
          var oneText=choose[i].getAttribute("_text");
          if (choose[i].getAttribute("_text")=='其他') {
            selOther=true;
            if ($.trim($("input[name='workIndustryDesc']").val())!="") {
              oneText=oneText+"("+$.trim($("input[name='workIndustryDesc']").val())+")";
              _uWorkIndustryDesc=$.trim($("input[name='workIndustryDesc']").val());
            }
          } else {
            _uWorkIndustryDesc="";
            $("input[name='workIndustryDesc']").val("");
            $("input[name='workIndustryDesc']").hide();
          }
          ttArray.push(oneText);
          _uWorkIndustry+=","+choose[i].value;
        }
      }
//      if (selOther&&_uWorkIndustryDesc=="") alert("请录入“其他”从事行业方式");
//      else {
        if (_uWorkIndustry.length>0) _uWorkIndustry=_uWorkIndustry.substr(1);
        this.u_workIndustry=ttArray;
        $("#workIndustryModal").modal('hide');
        if (_uWorkIndustry!="") $("#cleanWorkIndustryBtn").show();
//      }
    },
    cleanWorkIndustry: function() {
      this.u_workIndustry="";
      _uWorkIndustry="";
      _uWorkIndustryDesc="";
      $("#cleanWorkIndustryBtn").hide();
      var choose=document.getElementsByName('workIndustry');
      for (var i=0; i<choose.length; i++) if (choose[i].checked) choose[i].checked=false;
      $("input[name='workIndustryDesc']").val("");
      $("input[name='workIndustryDesc']").hide();
    },
    clickWorkIndustry: function() {
      var otherCheck=false;
      var choose=document.getElementsByName('workIndustry');
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked&&choose[i].getAttribute("_text")=='其他') {
          otherCheck=true;
          break;
        }
      }
      if (otherCheck) $("input[name='workIndustryDesc']").show(); else $("input[name='workIndustryDesc']").hide();
    },
    selEnterpriseType: function() {
      var choose=document.getElementsByName('enterpriseType');
      var ttArray=[];
      var selOther=false;
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked) {
          var oneText=choose[i].getAttribute("_text");
          if (choose[i].getAttribute("_text")=='其他') {
            selOther=true;
            if ($.trim($("input[name='enterpriseTypeDesc']").val())!="") {
              oneText=oneText+"("+$.trim($("input[name='enterpriseTypeDesc']").val())+")";
              _uEnterpriseTypeDesc=$.trim($("input[name='enterpriseTypeDesc']").val());
            }
          } else {
            _uEnterpriseTypeDesc="";
            $("input[name='enterpriseTypeDesc']").val("");
            $("input[name='enterpriseTypeDesc']").hide();
          }
          ttArray.push(oneText);
          _uEnterpriseType+=","+choose[i].value;
        }
      }
//      if (selOther&&_uEnterpriseTypeDesc=="") alert("请录入“其他”企业性质");
//      else {
        if (_uEnterpriseType.length>0) _uEnterpriseType=_uEnterpriseType.substr(1);
        this.u_enterpriseType=ttArray;
        $("#enterpriseTypeModal").modal('hide');
        if (_uEnterpriseType!="") $("#cleanEnterpriseTypeBtn").show();
//      }
    },
    cleanEnterpriseType: function() {
      this.u_enterpriseType="";
      _uEnterpriseType="";
      _uEnterpriseTypeDesc="";
      $("#cleanEnterpriseTypeBtn").hide();
      var choose=document.getElementsByName('enterpriseType');
      for (var i=0; i<choose.length; i++) if (choose[i].checked) choose[i].checked=false;
      $("input[name='enterpriseTypeDesc']").val("");
      $("input[name='enterpriseTypeDesc']").hide();
    },
    clickEnterpriseType: function() {
      var otherCheck=false;
      var choose=document.getElementsByName('enterpriseType');
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked&&choose[i].getAttribute("_text")=='其他') {
          otherCheck=true;
          break;
        }
      }
      if (otherCheck) $("input[name='enterpriseTypeDesc']").show(); else $("input[name='enterpriseTypeDesc']").hide();
    },
    selKnowWay: function() {
      var choose=document.getElementsByName('knowWay');
      var ttArray=[];
      var selOther=false;
      _uKnowWayDesc="";
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked) {
          var oneText=choose[i].getAttribute("_text");
          if (choose[i].getAttribute("_text")=='其他') {
            selOther=true;
            if ($.trim($("input[name='knowWayDesc']").val())!="") {
              _uKnowWayDesc+=","+oneText+"="+$.trim($("input[name='knowWayDesc']").val());
              oneText=oneText+"("+$.trim($("input[name='knowWayDesc']").val())+")";
            }
          }
          if (choose[i].getAttribute("_text")=='户外广告牌') {
            if ($.trim($("input[name='knowWayGGP']").val())!="") {
              _uKnowWayDesc+=","+oneText+"="+$.trim($("input[name='knowWayGGP']").val());
              oneText=oneText+"("+$.trim($("input[name='knowWayGGP']").val())+")";
            }
          }
          if (choose[i].getAttribute("_text")=='渠道介绍') {
            if ($.trim($("input[name='knowWayJS']").val())!="") {
              _uKnowWayDesc+=","+oneText+"="+$.trim($("input[name='knowWayJS']").val());
              oneText=oneText+"("+$.trim($("input[name='knowWayJS']").val())+"公司)";
            }
          }
          ttArray.push(oneText);
          _uKnowWay+=","+choose[i].value;
        }
      }
//      if (selOther&&_uKnowWayDesc=="") alert("请录入“其他”从事行业方式");
//      else {
        if (_uKnowWay.length>0) _uKnowWay=_uKnowWay.substr(1);
        if (_uKnowWayDesc.length>0) _uKnowWayDesc=_uKnowWayDesc.substr(1);
        this.u_knowWay=ttArray;
        $("#knowWayModal").modal('hide');
        if (_uKnowWay!="") $("#cleanKnowWayBtn").show();
//      }
    },
    cleanKnowWay: function(type) {
      var canDeal=true;
      var _type=type?type:2;
      if (_type==1&&_uKnowWay!="") canDeal=false;
      if (canDeal) {
        this.u_knowWay="";
        _uKnowWay="";
        _uKnowWayDesc="";
        $("#cleanKnowWayBtn").hide();
        var choose=document.getElementsByName('knowWay');
        for (var i=0; i<choose.length; i++) if (choose[i].checked) choose[i].checked=false;
        $("input[name='knowWayDesc']").val("");
        $("input[name='knowWayDesc']").hide();
        $("input[name='knowWayGGP']").val("");
        $("input[name='knowWayGGP']").attr("readonly",true);
        $("input[name='knowWayJS']").val("");
        $("input[name='knowWayJS']").attr("readonly",true);
      }
    },
    clickKnowWayOther: function() {
      var otherCheck=false;
      var choose=document.getElementsByName('knowWay');
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked&&choose[i].getAttribute("_text")=='其他') {
          otherCheck=true;
          break;
        }
      }
      if (otherCheck) $("input[name='knowWayDesc']").show(); else $("input[name='knowWayDesc']").hide();
    },
    clickKnowWayGGP: function() {
      var ggpCheck=false;
      var choose=document.getElementsByName('knowWay');
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked&&choose[i].getAttribute("_text")=='户外广告牌') {
          ggpCheck=true;
          break;
        }
      }
      $("input[name='knowWayGGP']").attr("readonly",!ggpCheck);
      if (ggpCheck) $("input[name='knowWayGGP']").val(this.u_tempKnowWayGGP);
      else {
        this.u_tempKnowWayGGP=$("input[name='knowWayGGP']").val();
        $("input[name='knowWayGGP']").val("");
      }
    },
    clickKnowWayJS: function() {
      var jsCheck=false;
      var choose=document.getElementsByName('knowWay');
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked&&choose[i].getAttribute("_text")=='渠道介绍') {
          jsCheck=true;
          break;
        }
      }
      $("input[name='knowWayJS']").attr("readonly",!jsCheck);
      if (jsCheck) $("input[name='knowWayJS']").val(this.u_tempKnowWayJS);
      else {
        this.u_tempKnowWayJS=$("input[name='knowWayJS']").val();
        $("input[name='knowWayJS']").val("");
      }
    },
    selEstCustWorth: function() {
      var choose=document.getElementsByName('estCustWorth');
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked) {
          this.u_estCustWorth=choose[i].getAttribute("_text");
          _uEstCustWorth=choose[i].value;
        }
      }
      $("#estCustWorthModal").modal('hide');
      if (_uEstCustWorth!="") $("#cleanEstCustWorthBtn").show();
    },
    cleanEstCustWorth: function() {
      this.u_estCustWorth="";
      _uEstCustWorth="";
      $("#cleanEstCustWorthBtn").hide();
      var choose=document.getElementsByName('estCustWorth');
      for (var i=0; i<choose.length; i++) if (choose[i].checked) choose[i].checked=false;
    },
    selInvestType: function() {
      var choose=document.getElementsByName('investType');
      var ttArray=[];
      var selOther=false;
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked) {
          var oneText=choose[i].getAttribute("_text");
          if (choose[i].getAttribute("_text")=='其他') {
            selOther=true;
            if ($.trim($("input[name='investTypeDesc']").val())!="") {
              oneText=oneText+"("+$.trim($("input[name='investTypeDesc']").val())+")";
              _uInvestTypeDesc=$.trim($("input[name='investTypeDesc']").val());
            }
          }
          ttArray.push(oneText);
          _uInvestType+=","+choose[i].value;
        }
      }
//      if (selOther&&_uInvestTypeDesc=="") alert("请录入“其他”从事行业方式");
//      else {
        if (_uInvestType.length>0) _uInvestType=_uInvestType.substr(1);
        this.u_investType=ttArray;
        $("#investTypeModal").modal('hide');
        if (_uInvestType!="") $("#cleanInvestTypeBtn").show();
//      }
    },
    cleanInvestType: function(type) {
      var canDeal=true;
      var _type=type?type:2;
      if (_type==1&&_uInvestType!="") canDeal=false;
      if (canDeal) {
        this.u_investType="";
        _uInvestType="";
        _uInvestTypeDesc="";
        $("#cleanInvestTypeBtn").hide();
        var choose=document.getElementsByName('investType');
        for (var i=0; i<choose.length; i++) if (choose[i].checked) choose[i].checked=false;
        $("input[name='investTypeDesc']").val("");
        $("input[name='investTypeDesc']").hide();
      }
    },
    clickInvestTypeOther: function() {
      var otherCheck=false;
      var choose=document.getElementsByName('investType');
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked&&choose[i].getAttribute("_text")=='其他') {
          otherCheck=true;
          break;
        }
      }
      if (otherCheck) $("input[name='investTypeDesc']").show(); else $("input[name='investTypeDesc']").hide();
    },
    selCaptalPrepSection: function() {
      var choose=document.getElementsByName('captalPrepSection');
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked) {
          this.u_captalPrepSection=choose[i].getAttribute("_text");
          _uCaptalPrepSection=choose[i].value;
        }
      }
      $("#captalPrepSectionModal").modal('hide');
      if (_uCaptalPrepSection!="") $("#cleanCaptalPrepSectionBtn").show();
    },
    cleanCaptalPrepSection: function() {
      this.u_captalPrepSection="";
      _uCaptalPrepSection="";
      $("#cleanCaptalPrepSectionBtn").hide();
      var choose=document.getElementsByName('captalPrepSection');
      for (var i=0; i<choose.length; i++) if (choose[i].checked) choose[i].checked=false;
    }
  }
});
$('#knowWayModal').on('hide.bs.modal', function () {
  vueStep2.cleanKnowWay(1);
});
$('#investTypeModal').on('hide.bs.modal', function () {
  vueStep2.cleanInvestType(1);
});
var vueStep3=new Vue({
  el: "#step3",
  data:{
    u_realtyProductType: "",
    u_attentAcreage: "",
    u_priceSection: "",
    u_buyPurpose: "",
    u_attentionPoint: "",
    u_recepTimeSection: "",
    u_custCore: ""
  },
  methods: {
    selRealtyProductType: function() {
      var choose=document.getElementsByName('realtyProductType');
      var ttArray=[];
      var selOther=false;
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked) {
          var oneText=choose[i].getAttribute("_text");
          if (choose[i].getAttribute("_text")=='其他') {
            selOther=true;
            if ($.trim($("input[name='realtyProductTypeDesc']").val())!="") {
              oneText=oneText+"("+$.trim($("input[name='realtyProductTypeDesc']").val())+")";
              _uRealtyProductTypeDesc=$.trim($("input[name='realtyProductTypeDesc']").val());
            }
          }
          ttArray.push(oneText);
          _uRealtyProductType+=","+choose[i].value;
        }
      }
//      if (selOther&&_uRealtyProductTypeDesc=="") alert("请录入“其他”关注产品类型");
//      else {
        if (_uRealtyProductType.length>0) _uRealtyProductType=_uRealtyProductType.substr(1);
        this.u_realtyProductType=ttArray;
        $("#realtyProductTypeModal").modal('hide');
        if (_uRealtyProductType!="") $("#cleanRealtyProductTypeBtn").show();
//      }
    },
    cleanRealtyProductType: function(type) {
      var canDeal=true;
      var _type=type?type:2;
      if (_type==1&&_uRealtyProductType!="") canDeal=false;
      if (canDeal) {
        this.u_realtyProductType="";
        _uRealtyProductType="";
        _uRealtyProductTypeDesc="";
        $("#cleanRealtyProductTypeBtn").hide();
        var choose=document.getElementsByName('realtyProductType');
        for (var i=0; i<choose.length; i++) if (choose[i].checked) choose[i].checked=false;
        $("input[name='realtyProductTypeDesc']").val("");
        $("input[name='realtyProductTypeDesc']").hide();
      }
    },
    clickRealtyProductTypeOther: function() {
      var otherCheck=false;
      var choose=document.getElementsByName('realtyProductType');
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked&&choose[i].getAttribute("_text")=='其他') {
          otherCheck=true;
          break;
        }
      }
      if (otherCheck) $("input[name='realtyProductTypeDesc']").show(); else $("input[name='realtyProductTypeDesc']").hide();
    },
    selAttentAcreage: function() {
      var choose=document.getElementsByName('attentAcreage');
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked) {
          this.u_attentAcreage=choose[i].getAttribute("_text");
          _uAttentAcreage=choose[i].value;
        }
      }
      $("#attentAcreageModal").modal('hide');
      if (_uAttentAcreage!="") $("#cleanAttentAcreageBtn").show();
    },
    cleanAttentAcreage: function() {
      this.u_attentAcreage="";
      _uAttentAcreage="";
      $("#cleanAttentAcreageBtn").hide();
      var choose=document.getElementsByName('attentAcreage');
      for (var i=0; i<choose.length; i++) if (choose[i].checked) choose[i].checked=false;
    },
    selPriceSection: function() {
      var choose=document.getElementsByName('priceSection');
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked) {
          this.u_priceSection=choose[i].getAttribute("_text");
          _uPriceSection=choose[i].value;
        }
      }
      $("#priceSectionModal").modal('hide');
      if (_uPriceSection!="") $("#cleanPriceSectionBtn").show();
    },
    cleanPriceSection: function() {
      this.u_priceSection="";
      _uPriceSection="";
      $("#cleanPriceSectionBtn").hide();
      var choose=document.getElementsByName('priceSection');
      for (var i=0; i<choose.length; i++) if (choose[i].checked) choose[i].checked=false;
    },
    selBuyPurpose: function() {
      var choose=document.getElementsByName('buyPurpose');
      var selOther=false;
      var ttArray=[];
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked) {
          var oneText=choose[i].getAttribute("_text");
          if (choose[i].getAttribute("_text")=='其他') {
            selOther=true;
            if ($.trim($("input[name='buyPurposeDesc']").val())!="") {
              oneText=oneText+"("+$.trim($("input[name='buyPurposeDesc']").val())+")";
              _uBuyPurposeDescDesc=$.trim($("input[name='buyPurposeDesc']").val());
            }
          } else {
            _uBuyPurposeDesc="";
            $("input[name='buyPurposeDesc']").val("");
            $("input[name='buyPurposeDesc']").hide();
          }
          ttArray.push(oneText);
          _uBuyPurposeDesc+=","+choose[i].value;
        }
      }
//      if (selOther&&_uBuyPurposeDescDesc=="") alert("请录入“其他”购房目的");
//      else {
        if (_uBuyPurposeDesc.length>0) _uBuyPurposeDesc=_uBuyPurposeDesc.substr(1);
        this.u_buyPurpose=ttArray;
        $("#buyPurposeModal").modal('hide');
        if (_uBuyPurposeDesc!="") $("#cleanBuyPurposeBtn").show();
//      }
    },
    cleanBuyPurpose: function() {
      this.u_buyPurpose="";
      _uBuyPurpose="";
      _uBuyPurposeDesc="";
      $("#cleanBuyPurposeBtn").hide();
      var choose=document.getElementsByName('buyPurpose');
      for (var i=0; i<choose.length; i++) if (choose[i].checked) choose[i].checked=false;
      $("input[name='buyPurposeDesc']").val("");
      $("input[name='buyPurposeDesc']").hide();
    },
    clickBuyPurpose: function() {
      var otherCheck=false;
      var choose=document.getElementsByName('buyPurpose');
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked&&choose[i].getAttribute("_text")=='其他') {
          otherCheck=true;
          break;
        }
      }
      if (otherCheck) $("input[name='buyPurposeDesc']").show(); else $("input[name='buyPurposeDesc']").hide();
    },
    selAttentionPoint: function() {
      var choose=document.getElementsByName('attentionPoint');
      var ttArray=[];
      var selOther=false;
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked) {
          var oneText=choose[i].getAttribute("_text");
          if (choose[i].getAttribute("_text")=='其他') {
            selOther=true;
            if ($.trim($("input[name='attentionPointDesc']").val())!="") {
              oneText=oneText+"("+$.trim($("input[name='attentionPointDesc']").val())+")";
              _uAttentionPointDesc=$.trim($("input[name='attentionPointDesc']").val());
            }
          }
          ttArray.push(oneText);
          _uAttentionPointDesc+=","+choose[i].value;
        }
      }
//      if (selOther&&_uAttentionPointDescDesc=="") alert("请录入“其他”购房目的");
//      else {
      if (_uAttentionPointDesc.length>0) _uAttentionPointDesc=_uAttentionPointDesc.substr(1);
      this.u_attentionPoint=ttArray;
      $("#attentionPointModal").modal('hide');
      if (_uAttentionPointDesc!="") $("#cleanAttentionPointBtn").show();
//      }
    },
    cleanAttentionPoint: function(type) {
      var canDeal=true;
      var _type=type?type:2;
      if (_type==1&&_uAttentionPoint!="") canDeal=false;
      if (canDeal) {
        this.u_attentionPoint="";
        _uAttentionPoint="";
        _uAttentionPointDesc="";
        $("#cleanAttentionPointBtn").hide();
        var choose=document.getElementsByName('attentionPoint');
        for (var i=0; i<choose.length; i++) if (choose[i].checked) choose[i].checked=false;
        $("input[name='attentionPointDesc']").val("");
        $("input[name='attentionPointDesc']").hide();
      }
    },
    clickAttentionPointOther: function() {
      var otherCheck=false;
      var choose=document.getElementsByName('attentionPoint');
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked&&choose[i].getAttribute("_text")=='其他') {
          otherCheck=true;
          break;
        }
      }
      if (otherCheck) $("input[name='attentionPointDesc']").show(); else $("input[name='attentionPointDesc']").hide();
    },
    selRecepTimeSection: function() {
      var choose=document.getElementsByName('recepTimeSection');
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked) {
          this.u_recepTimeSection=choose[i].getAttribute("_text");
          _uRecepTimeSection=choose[i].value;
        }
      }
      $("#recepTimeSectionModal").modal('hide');
      if (_uRecepTimeSection!="") $("#cleanRecepTimeSectionBtn").show();
    },
    cleanRecepTimeSection: function() {
      this.u_recepTimeSection="";
      _uRecepTimeSection="";
      $("#cleanRecepTimeSectionBtn").hide();
      var choose=document.getElementsByName('recepTimeSection');
      for (var i=0; i<choose.length; i++) if (choose[i].checked) choose[i].checked=false;
    },
    selCustCore: function() {
      var choose=document.getElementsByName('custCore');
      for (var i=0; i<choose.length; i++) {
        if (choose[i].checked) {
          this.u_custCore=choose[i].getAttribute("_text");
          _uCustCore=choose[i].value;
        }
      }
      $("#custCoreModal").modal('hide');
      if (_uCustCore!="") $("#cleanCustCoreBtn").show();
    },
    cleanCustCore: function() {
      this.u_custCore="";
      _uCustCore="";
      $("#cleanCustCoreBtn").hide();
      var choose=document.getElementsByName('custCore');
      for (var i=0; i<choose.length; i++) if (choose[i].checked) choose[i].checked=false;
    }
  }
});
$('#realtyProductTypeModal').on('hide.bs.modal', function () {
  vueStep3.cleanRealtyProductType(1);
});
$('#attentionPointModal').on('hide.bs.modal', function () {
  vueStep3.cleanAttentionPoint(1);
});
//=====================================================================
var _TYPE="add";
var recordId="";//记录Id只有当_TYPE=update时，此变量才有值。
var custId="";

//填充数据,并初始化
$(function() {
  _TYPE=getUrlParam(window.location.href, 'type');
  if (_TYPE==null) _TYPE="add";
  if (_TYPE.toLocaleLowerCase()=='update') _TYPE="update";
  $(document).attr("title","客户数据中心-首访信息录入");
  $$('.datatime').mdater({
    minDate: new Date()
  });
  if (_TYPE=='add') initData();
  else if (_TYPE=='update') {
    //设置不能修改的字段:项目名称，客户名称，客户电话号码
    $(document).attr("title","客户数据中心-首访信息修改");
    //获得本条记录消息信息
    var recordId=getUrlParam(window.location.href, 'recordId');
    if (!recordId) window.location.href=_URL_BASE+"/wxfront/err.html?3000=无记录Id";
    else {
      var _data={};
      _data.recordId=recordId;
      var url=_URL_BASE+"/wx/api/getRecord01";
      $.ajax({type:"post", async:true, url:url, data:_data, dataType:"json",
        success: function(json) {
          if (json.msg=='100') {
            initData();
            fillData(json.data);
          } else {
            window.location.href=_URL_BASE+"/wxfront/err.html?1000=抱歉<br/>无法获得首访录入信息";
          }
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
          window.location.href=_URL_BASE+"/wxfront/err.html?2000=系统错误<br/>status="
            +XMLHttpRequest.status+"<br/>readyState="+XMLHttpRequest.readyState+"<br/>text="+textStatus;
        }
      });
    }
  }
});

function fillData(data) {//填数据
  if (!data) return;
  if (data.custname) $("input[name='custName']").val(data.custname);
  if (data.custphonenum) $("input[name='custPhone']").val(data.custphonenum);
  if (data.custsex) fill("sex", data.custsex);
  if (data.firstTime.time) fillTime("firstTime", data.firstTime.time);

  function fill(id, value) {
    var choose=document.getElementsByName(''+id);
    for (var i=0; i<choose.length; i++) {
      if (choose[i].getAttribute("_text")==value) {
   	    choose[i].checked=true;
        $("#"+id).val(value);
      }
    }
  }
  function fillTime(id, value) {
    var choose=document.getElementsByName(''+id);
    for (var i=0; i<choose.length; i++) {
      if (choose[i].getAttribute("_text")==value) {
   	    choose[i].checked=true;
        $("#"+id).val(value);
      }
    }
  }
}
function initData() {
  var url=_URL_BASE+"/wx/api/personalCenter";
  $.ajax({type:"post", async:true, url:url, data:null, dataType:"json",
    success: function(json) {
      if (json.msg=='100') {
        initPage(json.userInfo);
        $("#step1").show();
      } else {
        window.location.href=_URL_BASE+"/wxfront/err.html?1000=抱歉<br/>无法获得您的个人信息<br/>禁止录入";
      }
    },
    error: function(XMLHttpRequest, textStatus, errorThrown) {
      window.location.href=_URL_BASE+"/wxfront/err.html?2000=系统错误<br/>status="
        +XMLHttpRequest.status+"<br/>readyState="+XMLHttpRequest.readyState+"<br/>text="+textStatus;
    }
  });
  function initPage(data) {
    $("input[name='user']").val(data.realname);
    _uUserId=data.userid;
    var canShowProj=false;
    var prjNames=""+data.checkProj;
    var lPrj=prjNames.split(',');
    var projHtml="";
    var projId,projName;
    for (var i=0;i<lPrj.length; i++) {
      if ($.trim(lPrj[i])!='') {
        if (lPrj[i].indexOf('-')!=-1) {
          _uProj=lPrj[i];
          if (!canShowProj) canShowProj=true;
          projId=lPrj[i].substring(0,lPrj[i].indexOf('-'));
          projName=lPrj[i].substring(lPrj[i].indexOf('-')+1);
          projHtml+='<label><input type="radio" name="proj" value="'+projId+'-'+projName+'" _text="'+projName+'" onclick="selProj()"/> '+projName+' </label>';
        }
      }
    }
    if (canShowProj&&lPrj.length>1) {
      $("#projData").html(projHtml);
      $("#projArea").show(); 
    } else {
      _uProjName=projName;
      _uProjId=projId;
    }
    cleanData();
  }
}
function cleanData() {
  var nt=new Date();
  var str=""+nt.getFullYear()+"-";
  str+=(nt.getMonth()+1)+"-";
  str+=nt.getDate();
  $("input[name='curTime']").val(str);
  //清除所有数据
  $("input[name='custName']").val("");
  $("input[name='custPhone']").val("");
  $("input[name='firstTime']").val("");
  clean('sex');
  clean('ageGroup');
  cleanArea('localResidence');
  cleanArea('localWorkArea');
  cleanArea('outResidence');
  cleanArea('outWorkArea');
  clean('familyStatus');
  clean('trafficType');
  clean('buyQualify');
  clean('workIndustry');
  clean('enterpriseType');
  clean('knowWay');
  $("input[name='knowWayGGP']").val("");
  $("input[name='knowWayGGP']").attr("readonly",true);
  $("input[name='knowWayJS']").val("");
  $("input[name='knowWayJS']").attr("readonly",true);
  clean('estCustWorth');
  clean('investType');
  clean('captalPrepSection');
  clean('realtyProductType');
  clean('attentAcreage');
  clean('priceSection');
  clean('buyPurpose');
  clean('attentionPoint');
  clean('recepTimeSection');
  clean('custCore');
  $("input[name='compareProjs']").val("");
  $("input[name='custDescn']").val("");

  function clean(otherId) {
    var choose=document.getElementsByName(''+otherId);
    for (var i=0; i<choose.length; i++) if (choose[i].checked) choose[i].checked=false;
    try {
      $("input[name='"+otherId+"Desc']").val("");
      $("input[name='"+otherId+"Desc']").hide();
    }catch(e){}
  }
  function cleanArea() {
  }
}

//翻页切换
function step1Next() {//要判断是否应该进行首访录入
  $("#step1").hide(0);
  $("#step2").show(0);
  $("#step3").hide(0);
  return ;
  if (_TYPE=='update') {
    $("#step1").hide(0);
    $("#step2").show(0);
    $("#step3").hide(0);
  } else if (_TYPE=='add') {//要判断是否应该进行首访录入
    //获得参数
    var _data={};
    _data.custName=$("input[name='custName']").val();
    _data.phoneNum=$("input[name='custPhone']").val();
    var errMsg="";
    if (!$.trim(_data.custName)) errMsg+="\n请输入客户姓名！";
    if (!$.trim(_data.phoneNum)) errMsg+="\n请输入客户电话号码！";
    if (!$.trim(_uProjId)) errMsg+="\n请选择项目！";
    if (_data.phoneNum.length<11) errMsg+="\n手机号码不符合规则"; 
    _data.projId=_uProjId;
    if (errMsg) {
      alert(errMsg.substr(1));
      return;
    }
    var canNext=false;
    var url=_URL_BASE+"wx/api/existRecord01";
    alert(url);
    $.ajax({type:"post", async:true, url:url, data:_data, dataType:"json",
      success: function(json) {
        if (json.msg=='103') {
          window.location.href=_URL_BASE+"/wxfront/err.html?1000=抱歉<br/>系统出现未知问题，不能录入";
        } else if (json.msg=='100') { //有就已存在
          if (json.authorId==_uUserId) {//转复方
            alert(_URL_BASE+"/wxfront/input/record02.html?type=add&custName="+encodeURIComponent(_data.custName)+"&custPhone="+encodeURIComponent(_data.custPhone)+"&projId="+encodeURIComponent(_data.projId));
            window.location.href=_URL_BASE+"/wxfront/input/record02.html?type=add&custName="+encodeURIComponent(_data.custName)+"&custPhone="+encodeURIComponent(_data.custPhone)+"&projId="+encodeURIComponent(_data.projId);
          } else {
            window.location.href=_URL_BASE+"/wxfront/err.html?4000=此客户已由【"+json.authorName+"】进行接待<br/>您无权录入！";
            return;
          }
        } else canNext=true;
        if (canNext) {
          $("#step1").hide(0);
          $("#step2").show(0);
          $("#step3").hide(0);
        }
      },
      error: function(XMLHttpRequest, textStatus, errorThrown) {
        window.location.href=_URL_BASE+"/wxfront/err.html?2000=系统错误<br/>status="
          +XMLHttpRequest.status+"<br/>readyState="+XMLHttpRequest.readyState+"<br/>text="+textStatus;
      }
    });
  }
}
function step2Prev() {
  $("#step1").show(0);
  $("#step2").hide(0);
  $("#step3").hide(0);
}
function step2Next() {
  $("#step1").hide(0);
  $("#step2").hide(0);
  $("#step3").show(0);
}
function step3Prev() {
  $("#step1").hide(0);
  $("#step2").show(0);
  $("#step3").hide(0);
}

//=以下为提交，包括修改和删除====================================
function commitData() {
  alert(_TYPE);
  var commitData=getData(_TYPE);
  var msg=validate(comitData, _TYPE);
  if (msg.err) {
    if (msg.returnTo==1) step2Prev();
    alert(err);
    return;
  }

  if (_TYPE=='add') {
    commitInsert(commitData);
  } else if (_TYPE='update') {
    commitUpdate(commitData);
  }

  function getData(type) {
    var retData={};
    var temp="";
    if (_uProjId) retData.projid=_uProjId;
    if (custId) retData.custid=custId;
    temp=$("input[name='custName']").val();
    if (temp) retData.custname=temp;
    temp=$("input[name='custPhone']").val();
    if (temp) retData.custphonenum=temp;
    temp=$("input[name='curTime']").val();
    if (temp) retData.receptime=temp;
    temp=$("input[name='firstTime']").val();
    if (temp) retData.firstknowtime=temp;
    if (_uSex) retData.custsex=_uSex;
    if (_uAgeGroup) retData.agegroup=_uAgeGroup;
    if (_uBuyQualify) retData.buyqualify=_uBuyQualify;
    if (_uLocalResidence) retData.localresidence=_uLocalResidence;
    if (_uLocalWorkarea) retData.localworkarea=_uLocalWorkarea;
    if (_uOutResidence) retData.outresidence=_uOutResidence;
    if (_uOutWorkarea) retData.outworkarea=_uOutWorkarea;
    if (_uFamilyStatus) retData.familystatus=_uFamilyStatus;
    if (_uTrafficType) retData.traffictype=_uTrafficType;
    if (_uWorkIndustry) retData.workindustry=_uWorkIndustry;
    if (_uEnterpriseType) retData.enterprisetype=_uEnterpriseType;
    if (_uRealtyProductType) retData.realtyproducttype=_uRealtyProductType;
    if (_uAttentAcreage) retData.attentacreage=_uAttentAcreage;
    if (_uPriceSection) retData.pricesection=_uPriceSection;
    if (_uBuyPurpose) retData.buypurpose=_uBuyPurpose;
    if (_uKnowWay) retData.knowway=_uKnowWay;
    if (_uAttentionPoint) retData.attentionpoint=_uAttentionPoint;
    if (_uEstCustWorth) retData.estcustworth=_uEstCustWorth;
    if (_uInvestType) retData.investtype=_uInvestType;
    if (_uCaptalPrepSection) retData.captalprepsection=_uCaptalPrepSection;
    temp=$("textarea[name='compareProjs']").html();
    if (temp) retData.compareprojs=temp;
    if (_uRecepTimeSection) retData.receptimesection=_uRecepTimeSection;
    if (_uCustCore) retData.custscore=_uCustCore;
    if (type=='add') {
      if (_uUserId) retData.authorid=_uUserId;
      if (_uUserId) retData.creatorid=_uUserId;
    }
    if (_uTrafficTypeDesc) retData.traffictypedesc=_uTrafficTypeDesc;
    if (_uWorkIndustryDesc) retData.workindustrydesc=_uWorkIndustryDesc;
    if (_uEnterpriseTypeDesc) retData.enterprisetypedesc=_uEnterpriseTypeDesc;
    if (_uRealtyProductTypeDesc) retData.realtyproducttypedesc=_uRealtyProductTypeDesc;
    if (_uBuyPurposeDesc) retData.buypurposedesc=_uBuyPurposeDesc;
    if (_uKnowWayDesc) retData.knowwaydesc=_uKnowWayDesc;
    if (_uAttentionPointDesc) retData.attentionpointdesc=_uAttentionPointDesc;
    if (_uInvestTypeDesc) retData.investtypedesc=_uInvestTypeDesc;
    temp=$("textarea[name='custDescn']").html();
    if (temp) retData.custdescn=temp;
    return retData;
  }
  function validate(data, type) {
    var ret={};
    ret.err="";
    ret.turnTo=3;//到第几节
    var err="";
    if (!data) {
      err="请先输入数据";
      return ret;
    }
    if (!data.projid) ret.err+=";/n无法获得项目Id";
    if (!data.custid&&type=='update') ret.err+=";/n无法获得客户Id";
    if (!data.custname) {
      ret.err+=";/n无法获得客户名称";
      ret.turnTo=1;
    }
    if (!data.custphonenum) {
      ret.err+=";/n无法获得客户手机";
      ret.turnTo=1;
    }
    if (data.custphonenum.length<11) {
      ret.err+=";/n无法获得客户手机";
      ret.turnTo=1;
    }
    return ret;
  }
  function commitInsert(_data) {
    var url=_URL_BASE+"wx/api/addHisFirstRecord";
    alert(url);
    $.ajax({type:"post", async:true, url:url, data:_data, dataType:"json",
      success: function(json) {
        if (json.msg!='100') {
          window.location.href=_URL_BASE+"/wxfront/err.html?8001=录入首访记录错误！";
        } else {
          if (confirm("录入成功，要录入下一条首访记录吗？")) {
            step2Prev();
            cleanData();
          } else {
            window.location.href=_URL_BASE+"/wxfront/search/record01.html";
          }
        }
      },
      error: function(XMLHttpRequest, textStatus, errorThrown) {
        window.location.href=_URL_BASE+"/wxfront/err.html?2000=系统错误<br/>status="
          +XMLHttpRequest.status+"<br/>readyState="+XMLHttpRequest.readyState+"<br/>text="+textStatus;
      }
    });
  }
  function commitUpdate(data) {
    var url=_URL_BASE+"wx/api/updateRecord01";
    alert(url);
    $.ajax({type:"post", async:true, url:url, data:_data, dataType:"json",
      success: function(json) {
        if (json.msg!='100') {
          window.location.href=_URL_BASE+"/wxfront/err.html?9001=修改首访记录错误！";
        } else {
          alert("修改首访记录成功!");
          window.location.href=_URL_BASE+"/wxfront/search/record01.html";
        }
      },
      error: function(XMLHttpRequest, textStatus, errorThrown) {
        window.location.href=_URL_BASE+"/wxfront/err.html?2000=系统错误<br/>status="
          +XMLHttpRequest.status+"<br/>readyState="+XMLHttpRequest.readyState+"<br/>text="+textStatus;
      }
    });
  }
}
</script>
</body>
</html>